<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat AI Assistant</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Your provided styling with modifications for chat interface */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Hind Siliguri', sans-serif;
            -webkit-tap-highlight-color: transparent;
        }

        body {
            background: #0a0a0a;
            color: #ffffff;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow-x: hidden;
        }

        body::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(26, 26, 46, 0.5) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(15, 52, 96, 0.4) 0%, transparent 20%),
                radial-gradient(circle at 50% 50%, rgba(22, 33, 62, 0.3) 0%, transparent 30%);
            z-index: -1;
        }

        /* Header Styles */
        .header {
            background: rgba(15, 15, 20, 0.9);
            color: #ffffff;
            padding: 20px 0;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            position: sticky;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 1000;
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text {
            font-size: 32px;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
        }

        .logo-text i {
            margin-right: 15px;
            font-size: 28px;
            color: #4CAF50;
        }

        .ai-model-selector {
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
        }

        .model-select {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .model-select:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        /* Main Chat Container */
        .main-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
            flex: 1;
            width: 100%;
            display: flex;
            flex-direction: column;
        }

        /* Chat Container */
        .chat-container {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(20, 20, 30, 0.6);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin-bottom: 30px;
            overflow: hidden;
            position: relative;
        }

        .chat-container::before {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 5%;
            width: 90%;
            height: 10px;
            background: rgba(255, 255, 255, 0.05);
            filter: blur(10px);
            border-radius: 50%;
        }

        /* Messages Area */
        .messages-container {
            flex: 1;
            overflow-y: auto;
            padding-right: 10px;
            margin-bottom: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        /* Message Styles */
        .message {
            display: flex;
            gap: 15px;
            animation: fadeIn 0.3s ease;
            max-width: 85%;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            align-self: flex-end;
        }

        .message.ai {
            align-self: flex-start;
        }

        .message-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            flex-shrink: 0;
            margin-top: 5px;
        }

        .user .message-avatar {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.2), rgba(76, 175, 80, 0.3));
            color: #4CAF50;
        }

        .ai .message-avatar {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.2), rgba(33, 150, 243, 0.3));
            color: #2196F3;
        }

        .message-content {
            background: rgba(255, 255, 255, 0.08);
            border-radius: 18px;
            padding: 15px 20px;
            max-width: 100%;
            word-wrap: break-word;
            border: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        .user .message-content {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.15), rgba(76, 175, 80, 0.1));
            border-color: rgba(76, 175, 80, 0.3);
            border-bottom-right-radius: 5px;
        }

        .ai .message-content {
            background: linear-gradient(135deg, rgba(33, 150, 243, 0.15), rgba(33, 150, 243, 0.1));
            border-color: rgba(33, 150, 243, 0.3);
            border-bottom-left-radius: 5px;
        }

        .message-text {
            font-size: 16px;
            line-height: 1.6;
            color: rgba(255, 255, 255, 0.95);
        }

        .message-time {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.5);
            margin-top: 8px;
            text-align: right;
        }

        /* Input Area */
        .input-container {
            display: flex;
            gap: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            border: 2px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .input-container:focus-within {
            border-color: rgba(76, 175, 80, 0.4);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.2);
        }

        .message-input {
            flex: 1;
            background: transparent;
            border: none;
            color: white;
            font-size: 16px;
            resize: none;
            max-height: 120px;
            min-height: 24px;
            outline: none;
            font-weight: 500;
        }

        .message-input::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .send-button {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.8), rgba(76, 175, 80, 0.6));
            border: none;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 18px;
            flex-shrink: 0;
        }

        .send-button:hover:not(:disabled) {
            background: linear-gradient(135deg, rgba(76, 175, 80, 0.9), rgba(76, 175, 80, 0.7));
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .send-button:active:not(:disabled) {
            transform: translateY(0);
        }

        .send-button:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
            opacity: 0.6;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 20px;
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
            background: rgba(15, 15, 20, 0.5);
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }

        /* Typing indicator */
        .typing-indicator {
            display: none;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }

        .typing-indicator.active {
            display: flex;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(76, 175, 80, 0.8);
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typingAnimation {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }

        /* Scrollbar Styling */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(20, 20, 30, 0.5);
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.5), rgba(160, 174, 192, 0.5));
            border-radius: 10px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, rgba(160, 174, 192, 0.5), rgba(255, 255, 255, 0.5));
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                padding: 0 15px;
            }
            
            .logo-text {
                font-size: 26px;
            }
            
            .logo-text i {
                font-size: 22px;
                margin-right: 10px;
            }
            
            .ai-model-selector {
                position: static;
                transform: none;
                margin-left: auto;
            }
            
            .model-select {
                padding: 6px 12px;
                font-size: 13px;
            }
            
            .main-container {
                padding: 20px 15px;
            }
            
            .chat-container {
                padding: 20px;
            }
            
            .message {
                max-width: 90%;
            }
            
            .message-avatar {
                width: 35px;
                height: 35px;
                font-size: 16px;
            }
            
            .message-content {
                padding: 12px 16px;
            }
            
            .message-text {
                font-size: 15px;
            }
            
            .input-container {
                padding: 15px;
            }
            
            .send-button {
                width: 45px;
                height: 45px;
                font-size: 16px;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 15px 0;
            }
            
            .logo-text {
                font-size: 22px;
            }
            
            .logo-text i {
                font-size: 20px;
            }
            
            .chat-container {
                padding: 15px;
            }
            
            .message {
                max-width: 95%;
                gap: 10px;
            }
            
            .message-avatar {
                width: 32px;
                height: 32px;
                font-size: 15px;
            }
            
            .message-content {
                padding: 10px 14px;
            }
            
            .input-container {
                padding: 12px;
            }
            
            .message-input {
                font-size: 15px;
            }
            
            .send-button {
                width: 42px;
                height: 42px;
            }
        }

        /* Welcome message */
        .welcome-message {
            text-align: center;
            padding: 40px 20px;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
            border-radius: 15px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .welcome-icon {
            font-size: 48px;
            color: #4CAF50;
            margin-bottom: 20px;
        }

        .welcome-title {
            font-size: 28px;
            margin-bottom: 15px;
            color: white;
            font-weight: 700;
        }

        .welcome-text {
            font-size: 16px;
            color: rgba(255, 255, 255, 0.8);
            max-width: 600px;
            margin: 0 auto;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .welcome-message {
                padding: 30px 15px;
            }
            
            .welcome-icon {
                font-size: 40px;
            }
            
            .welcome-title {
                font-size: 24px;
            }
            
            .welcome-text {
                font-size: 15px;
            }
        }

        /* Clear chat button */
        .clear-chat-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(244, 67, 54, 0.15);
            border: 1px solid rgba(244, 67, 54, 0.3);
            color: rgba(255, 255, 255, 0.9);
            padding: 8px 15px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            display: flex;
            align-items: center;
            gap: 8px;
            backdrop-filter: blur(10px);
            z-index: 10;
        }

        .clear-chat-btn:hover {
            background: rgba(244, 67, 54, 0.25);
            transform: translateY(-2px);
        }

        @media (max-width: 768px) {
            .clear-chat-btn {
                top: 15px;
                right: 15px;
                padding: 6px 12px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-container">
                <div class="logo-text">
                    <i class="fas fa-robot"></i>
                    <span>Chat AI Assistant</span>
                </div>
            </div>
            <div class="ai-model-selector">
                <select class="model-select" id="modelSelect">
                    <option value="gemini">Google Gemini (Recommended)</option>
                    <option value="demo">Demo Mode (No API Needed)</option>
                </select>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <main class="main-container">
        <!-- Chat Container -->
        <div class="chat-container">
            <button class="clear-chat-btn" id="clearChatBtn">
                <i class="fas fa-trash-alt"></i>
                Clear Chat
            </button>
            
            <!-- Welcome Message (Initially shown) -->
            <div class="welcome-message" id="welcomeMessage">
                <div class="welcome-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h2 class="welcome-title">Hello! I'm your AI Assistant</h2>
                <p class="welcome-text">
                    I can help answer your questions, explain concepts, write code, and much more. 
                    Feel free to ask me anything! I'm powered by advanced AI models to provide you with helpful responses.
                </p>
                <p class="welcome-text" style="margin-top: 15px; color: #4CAF50; font-weight: 600;">
                    <i class="fas fa-lightbulb"></i> Try asking: "Explain quantum computing in simple terms" or "Write a Python function to calculate factorial"
                </p>
            </div>

            <!-- Messages Container -->
            <div class="messages-container" id="messagesContainer">
                <!-- Messages will be dynamically added here -->
            </div>

            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>

            <!-- Input Area -->
            <div class="input-container">
                <textarea 
                    class="message-input" 
                    id="messageInput" 
                    placeholder="Type your message here... Press Enter to send, Shift+Enter for new line" 
                    rows="1"
                ></textarea>
                <button class="send-button" id="sendButton">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <p>AI Chat Assistant &copy; 2023 | Powered by Google Gemini API | Responses are AI-generated</p>
    </footer>

    <script>
        // DOM Elements
        const messagesContainer = document.getElementById('messagesContainer');
        const messageInput = document.getElementById('messageInput');
        const sendButton = document.getElementById('sendButton');
        const typingIndicator = document.getElementById('typingIndicator');
        const clearChatBtn = document.getElementById('clearChatBtn');
        const welcomeMessage = document.getElementById('welcomeMessage');
        const modelSelect = document.getElementById('modelSelect');

        // Configuration
        const API_KEY = 'AIzaSyANYeTInwCG9obngLbkdMwb0Gk790IdWzk'; // ⚠️ SECURITY WARNING: Don't expose this in production!
        const GEMINI_API_URL = 'https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent';
        
        // Demo responses for when no API key is configured
        const DEMO_RESPONSES = [
            "I'm currently running in demo mode. To use the full AI capabilities, you'll need to add your Google Gemini API key to the code. The Gemini API offers 60 free requests per minute with their free tier!",
            "This is a demonstration response. In a real implementation, this would be an AI-generated answer from Google's Gemini model. The Gemini API is free to start with generous limits.",
            "Hello! I'm your AI assistant. To connect me to real AI capabilities, please add your Gemini API key to the JavaScript code. You can get a free API key from Google AI Studio.",
            "I can help with questions on many topics! To enable real AI responses, you need to configure the API key. The setup is simple: 1) Get a free key from Google, 2) Add it to the code, 3) Start chatting!",
            "In a production environment, this response would come from Google's Gemini AI model. The free tier includes 1 million tokens per month, which is plenty for personal use."
        ];

        // Auto-resize textarea
        messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
        });

        // Send message on Enter (but allow Shift+Enter for new line)
        messageInput.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button click
        sendButton.addEventListener('click', sendMessage);

        // Clear chat button
        clearChatBtn.addEventListener('click', clearChat);

        // Function to add a message to the chat
        function addMessage(text, isUser = false) {
            // Hide welcome message when first message is sent
            if (welcomeMessage.style.display !== 'none') {
                welcomeMessage.style.display = 'none';
            }

            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user' : 'ai'}`;
            
            const time = new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            
            messageDiv.innerHTML = `
                <div class="message-avatar">
                    <i class="fas ${isUser ? 'fa-user' : 'fa-robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">${formatMessageText(text)}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            scrollToBottom();
            
            return messageDiv;
        }

        // Format message text (convert URLs to links, preserve line breaks)
        function formatMessageText(text) {
            // Convert URLs to clickable links
            let formattedText = text.replace(
                /(https?:\/\/[^\s]+)/g, 
                '<a href="$1" target="_blank" style="color: #4CAF50; text-decoration: underline;">$1</a>'
            );
            
            // Preserve line breaks
            formattedText = formattedText.replace(/\n/g, '<br>');
            
            // Add code formatting for inline code
            formattedText = formattedText.replace(/`([^`]+)`/g, '<code style="background: rgba(255,255,255,0.1); padding: 2px 6px; border-radius: 4px; font-family: monospace;">$1</code>');
            
            return formattedText;
        }

        // Function to send a message
        async function sendMessage() {
            const message = messageInput.value.trim();
            if (!message) return;
            
            // Disable input and button while processing
            messageInput.disabled = true;
            sendButton.disabled = true;
            
            // Add user message to chat
            addMessage(message, true);
            
            // Clear input and reset height
            messageInput.value = '';
            messageInput.style.height = 'auto';
            
            // Show typing indicator
            typingIndicator.classList.add('active');
            
            // Get AI response
            try {
                const selectedModel = modelSelect.value;
                let aiResponse;
                
                if (selectedModel === 'gemini' && API_KEY && API_KEY !== 'AIzaSyANYeTInwCG9obngLbkdMwb0Gk790IdWzk') {
                    // Use real Gemini API
                    aiResponse = await getGeminiResponse(message);
                } else {
                    // Use demo mode
                    aiResponse = await getDemoResponse();
                }
                
                // Simulate typing delay for better UX
                await new Promise(resolve => setTimeout(resolve, 800));
                
                // Hide typing indicator
                typingIndicator.classList.remove('active');
                
                // Add AI response to chat
                addMessage(aiResponse, false);
                
            } catch (error) {
                // Hide typing indicator
                typingIndicator.classList.remove('active');
                
                // Show error message
                const errorMsg = `Sorry, I encountered an error: ${error.message || 'Unknown error'}. Please check your API key or try again later.`;
                addMessage(errorMsg, false);
                
                console.error('Error getting AI response:', error);
            } finally {
                // Re-enable input and button
                messageInput.disabled = false;
                sendButton.disabled = false;
                messageInput.focus();
            }
        }

        // Function to get response from Gemini API
        async function getGeminiResponse(prompt) {
            const apiKey = API_KEY;
            
            if (!apiKey || apiKey === 'AIzaSyANYeTInwCG9obngLbkdMwb0Gk790IdWzk') {
                throw new Error('API key not configured. Please add your Gemini API key to the code.');
            }
            
            const response = await fetch(`${GEMINI_API_URL}?key=${apiKey}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    contents: [{
                        parts: [{ text: prompt }]
                    }]
                })
            });
            
            if (!response.ok) {
                const errorData = await response.json().catch(() => ({}));
                throw new Error(errorData.error?.message || `API request failed with status ${response.status}`);
            }
            
            const data = await response.json();
            return data.candidates?.[0]?.content?.parts?.[0]?.text || "I received an empty response from the AI model.";
        }

        // Function to get a demo response (when no API key is configured)
        async function getDemoResponse() {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 1000));
            
            // Return a random demo response
            const randomIndex = Math.floor(Math.random() * DEMO_RESPONSES.length);
            return DEMO_RESPONSES[randomIndex];
        }

        // Function to clear the chat
        function clearChat() {
            if (messagesContainer.children.length > 0) {
                if (confirm('Are you sure you want to clear the chat history?')) {
                    messagesContainer.innerHTML = '';
                    welcomeMessage.style.display = 'block';
                    scrollToBottom();
                }
            }
        }

        // Function to scroll to the bottom of the messages
        function scrollToBottom() {
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        // Initialize with a welcome message if the chat is empty
        function initChat() {
            const today = new Date();
            const timeString = today.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const dateString = today.toLocaleDateString();
            
            // Check if API key is configured
            const apiKeyConfigured = API_KEY && API_KEY !== 'AIzaSyANYeTInwCG9obngLbkdMwb0Gk790IdWzk';
            
            // Update welcome message based on configuration
            const statusText = apiKeyConfigured 
                ? '<span style="color: #4CAF50; font-weight: 600;">✓ Connected to Gemini API</span>' 
                : '<span style="color: #FF9800; font-weight: 600;">⚠ Running in Demo Mode - Add API key for real AI</span>';
            
            welcomeMessage.innerHTML = `
                <div class="welcome-icon">
                    <i class="fas fa-comments"></i>
                </div>
                <h2 class="welcome-title">Hello! I'm your AI Assistant</h2>
                <p class="welcome-text">
                    I can help answer your questions, explain concepts, write code, and much more. 
                    ${statusText}
                </p>
                <p class="welcome-text" style="margin-top: 15px; color: #4CAF50; font-weight: 600;">
                    <i class="fas fa-lightbulb"></i> Try asking: "Explain quantum computing in simple terms" or "Write a Python function to calculate factorial"
                </p>
                <p class="welcome-text" style="margin-top: 10px; font-size: 14px; color: rgba(255, 255, 255, 0.6);">
                    <i class="far fa-clock"></i> ${dateString} ${timeString}
                </p>
            `;
            
            // Set focus to input
            messageInput.focus();
        }

        // Initialize the chat when page loads
        document.addEventListener('DOMContentLoaded', initChat);
    </script>
</body>
</html>
